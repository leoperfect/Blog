# hashmap == 菜鸟驿站？

​	在电商如此发达的社会，物流成为了重中之重的一环。之前在学校收快递，都是自己在一堆快递里面找啊找，能找到也得花个三五分钟，体验非常不好。双十一就更不用说了，就像寻宝一样。现在阿里搞了个菜鸟，各个地方都有菜鸟驿站，负责揽件、收件、寄件，省时省力。菜鸟驿站每天那么多快件，它是怎么做到快速高效的管理的呢？

​	首先让我们还原收、取快递的过程。

​	首先，菜鸟驿站有非常多非常多的架子（1号架子、2号架子 … n号架子），架子上有一排位置负责存放快件。（非常类似于hashmap的数组链表模型）

1. 揽件： 当快递来到驿站，管理员会查看快递的单号，选取单号的后四位作为key（为了买家方便，一般选取手机号后四位），以`1234`为例子。管理员会把`1234`放到`1`号架子上；如果快递`1235`来了，也会放到1号架子上`1234`的后面；`2234`会放到2号架子上。
2. 通知：把单号发送给用户通知来取件。
3. 取件：用户到了驿站，报手机号`1234`，管理员就会到1号架子上寻找快件。

整个过程就实现了揽件、取件的流程，十分像hashmap的put和get方法。

疑问：当驿站的快递越来越多该怎么办呢？

> 当管理员发现快递越来越多，多到每个架子上都有好多快递，还是得找半天，甚至架子上都放不下了。管理员就多加1倍（甚至10倍）的架子，并给架子编号为`1-1`,`1-2`....。这样，快递`1234`就放在`1-2`号架子上，`1345`放在`1-3`号架子上。这样不就好了嘛~

那我们回顾一下 菜鸟驿站跟hashmap的对应关系。

|          | 菜鸟驿站                                                   | hashmap                                           |
| -------- | ---------------------------------------------------------- | ------------------------------------------------- |
| 底层存储 | 架子+架子上的位置                                          | 数组链表（java1.8之后改为红黑树方便查询）         |
| put      | 揽件：根据手机尾号找到对应的架子并放在最后的位置上         | 根据hash值找到对应的数组并放在链表的最后一个      |
| get      | 取件：根据手机尾号找到对应的架子并一一比对找到对应的快递   | 根据hash值找到对应的数组，并在链表中找到eqals的值 |
| 扩容     | 架子不够放，增加架子并重新编号                             | 数组增加一倍，并重新存放                          |
| hash碰撞 | 同一个手机号或者手机号前面两位相同，所以放在了同一个架子上 | hash值对应到了同一个数组中                        |

